# 1716. è®¡ç®—åŠ›æ‰£é“¶è¡Œçš„é’±

é—®é¢˜é“¾æ¥: [LeetCode - 1716. è®¡ç®—åŠ›æ‰£é“¶è¡Œçš„é’± (ç®€å•)](https://leetcode.cn/problems/calculate-money-in-leetcode-bank/)

ç›¸å…³æ ‡ç­¾ï¼šè´ªå¿ƒ æ•°ç»„ ç­‰å·®æ•°åˆ—

# Think

### Step 1

å¦‚æœn=26å¤©ï¼Œä¹Ÿå°±æ˜¯ä»æ˜ŸæœŸä¸€å¼€å§‹ï¼Œ26å¤©ä¹‹åé“¶è¡Œå­˜äº†å¤šå°‘é’±ã€‚26 å¤©å¯åˆ†ä¸º3å‘¨+5å¤©ï¼š

![step1](image/1716.step1.png)

### Step 2

æ— è®ºæ€»å¤©æ•°æ˜¯æ˜¯å¤šå°‘ï¼Œå®Œæ•´çš„åœ°xå‘¨çš„æ”¶ç›Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ï¼šn=8ï¼Œæœ‰å®Œæ•´çš„ç¬¬ä¸€å‘¨ï¼Œç¬¬ä¸€å‘¨æ€»æ•°ä¸º28ï¼›n=26ï¼Œä¹Ÿæœ‰å®Œæ•´çš„ç¬¬ä¸€å‘¨ï¼Œç¬¬ä¸€å‘¨æ€»æ•°ä¹Ÿä¸º28ã€‚

ğŸ’¡ `å®Œæ•´å‘¨çš„ç´¯è®¡æ€»å’Œ`å’Œ`æœ€åå‰©ä¸‹å¤©æ•°çš„å’Œ` = æ€»å’Œ

æ‰€ä»¥n=26æ—¶ï¼Œ`å®Œæ•´å‘¨çš„ç´¯è®¡æ€»å’Œ`å’Œ`æœ€åå‰©ä¸‹å¤©æ•°çš„å’Œ`åˆ†åˆ«ä¸ºï¼š

![step2](image/1716.step2.png)

### Step 3

å®Œæ•´å‘¨çš„ç´¯è®¡æ€»å’Œ

```java
1st week = 1 + 2 + 3 + 4 + 5 + 6 + 7 
     	 = 28
    
2nd week = (week1) + 2 + 3 + 4 + 5 + 6 + 7 + 8 
    	 =(1 + 2 + 3 + 4 + 5 + 6 + 7) + 2 + 3 + 4 + 5 + 6 + 7 + 8 
    	 =(1 + 2 + 3 + 4 + 5 + 6 + 7) +[(1 + 2 + 3 + 4 + 5 + 6 + 7) + 7]
    	 = (1 + 2 + 3 + 4 + 5 + 6 + 7) x 2 + 7 
    	 = 28 x 2 + 7
    
3rd week = 28 x 3 + 7 + 7  +  7
              week2 ^   ^week3^
    	 = 28 x 3 + 7 x 3
    
4th week = 28 x 4 + 7 x 6
    ...
  n week = 28 x m + 7 x (ç­‰å·®æ•°åˆ—æ±‚å’Œ)
		 = 28 x m + 7 x (n * [2 * a + (m âˆ’ 1) * d] / 2)
```

ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š

$m * [2 * a + (m âˆ’ 1) * d] / 2$

å¯ä»¥çœ‹å‡º`28 x m + 7 x (n * [2 * a + (m âˆ’ 1) * d] / 2)`æ˜¯`å®Œæ•´å‘¨çš„ç´¯è®¡æ€»å’Œ`çš„é€šç”¨å…¬å¼ã€‚

* m = å®Œæ•´å‘¨çš„ä¸ªæ•° = $26 / 7$ = 3
* a = èµ·å§‹é’±æ•° = 1
* d = å·®å€¼ = 1 (æ€»æ˜¯æ¯”ä¸Šå‘¨ä¸€å¤š1å—é’±)

å›¾è¡¨è¡¨ç¤ºï¼š

![step3](image/1716.step3.png)

### Step 4

æœ€åå‰©ä¸‹å¤©æ•°çš„å’Œï¼š4 + 5 + 6 + 7 + 8 ç»å…¸çš„ç­‰å·®æ•°åˆ—æ±‚å’Œã€‚

$m * [2 * a + (m âˆ’ 1) * d] / 2$

* m = å‰©ä¸‹çš„å¤©æ•° = $26 \% 7$ = 5
* a = èµ·å§‹é’±æ•° = 1 + ç¬¬xå‘¨ = 1 + 4
* d = å·®å€¼ = 1 (æ€»æ˜¯æ¯”æ˜¨å¤©å¤š1å—é’±)

å›¾è¡¨è¡¨ç¤ºï¼š

![step4](image/1716.step4.png)

ğŸ’¡ `å®Œæ•´å‘¨çš„ç´¯è®¡æ€»å’Œ`å’Œ`æœ€åå‰©ä¸‹å¤©æ•°çš„å’Œ` = æ€»å’Œ

# Key

é€šè¿‡è®¡ç®—æ¯å‘¨çš„æ”¶ç›ŠåŠ ä¸Šæœ€åçš„å‡ å¤©ï¼Œå¯ä»¥ç›´æ¥ç®—å‡ºâ€œå‘¨â€çš„æ€»æ•°å’Œå‰©ä¸‹çš„â€œæ—¥â€çš„æ€»æ•°ã€‚æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦éƒ½ä¸º$O(1)$ã€‚

è€Œç”¨foréå†26å¤©çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦åˆ†åˆ«ä¸º$O(n)$å’Œ$O(1)$ã€‚



**ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼**ï¼š

$Sn=n[2a+(nâˆ’1)d]/2$

- Sn = æ€»å’Œ
- n = é¡¹ç›®ä¸ªæ•° / æ•°åˆ—é•¿åº¦
- a = é¦–ä¸ªé¡¹ç›® / èµ·å§‹æ•°å­—
- d = å·®å€¼

# Answer

```java
public int totalMoney(int n) {
    	// å®Œæ•´å‘¨çš„ä¸ªæ•°
        int wholeWeeks = n / 7;
		
    	// ç®—å‡ºé™¤äº†ç¬¬ä¸€å‘¨çš„å®Œæ•´å‘¨ï¼Œå½“è¿ä¸€ä¸ªå®Œæ•´å‘¨éƒ½æ²¡æœ‰æ—¶ä¸-1ã€‚-1æ˜¯ä¸ºäº†è®¡ç®—æ–¹ä¾¿ï¼Œç¬¬ä¸€å‘¨ä¸ç®—åœ¨ç­‰å·®æ•°åˆ—é‡Œã€‚
        int followingWeeks = wholeWeeks > 0 ? wholeWeeks - 1 : 0;
    	// å¥—ç”¨å…¬å¼ 28 x m + 7 x (ç­‰å·®æ•°åˆ—æ±‚å’Œ)
        int extra7 = followingWeeks * (2 + (followingWeeks - 1)) / 2;
        int money = (28 * wholeWeeks) + extra7 * 7;
		
    	// å‰©ä¸‹çš„å¤©æ•°
        int remainDay = n % 7;
    	// å¥—ç”¨å…¬å¼ ç­‰å·®æ•°åˆ—æ±‚å’Œ
        money += remainDay * (2*(1 + wholeWeeks) + (remainDay - 1))/2;

        return money;
    }
```